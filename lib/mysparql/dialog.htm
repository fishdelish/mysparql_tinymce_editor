<html>
  <head>
    <title>MySparql Query Editor</title>
    <script src="../../tiny_mce_popup.js"></script>
    <script type="text/javascript" src="../../utils/mctabs.js"></script>
    <script type="text/javascript" src="../../utils/form_utils.js"></script>
    <script type="text/javascript" src="../../utils/validate.js"></script>
    <script type="text/javascript" src="../../utils/editable_selects.js"></script>
    <script src="js/jquery-1.4.3.js"></script>
    <script src="js/jquery.json.js"></script>
    <link href="css/mysparql.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <form id="mysparql">
      <div class="tabs">
        <ul>
          <li id="query_tab" class="current"><span><a href="javascript:mcTabs.displayTab('query_tab','query_panel');" onmousedown="return false;">Query</a></span></li>
          <li id="xslt-input"><span><a href="javascript:mcTabs.displayTab('xslt-input', 'xslt_panel');" onmousedown="return false;">XSLT</a></span></li>
          <li id="google-viz"><span><a href="javascript:mcTabs.displayTab('google-viz', 'google_panel');" onmousedown="return false;">Google</a></span></li>
<!--          <li id="preview_tab"><span><a href="javascript:mcTabs.displayTab('preview_tab', 'preview_panel');" onmousedown="return false;">Preview</a></span></li> -->
        </ul>
      </div>
      <div class="panel_wrapper">
        <div id="query_panel" class="panel current">
          <div class="errors" style="color:red;"></div>
          <fieldset>
            <legend>Query</legend>
            <table>
              <tr>
                <td class="column1">
                  <label for="query[source]">SPARQL Endpoint</label>
                </td>
                <td colspan="2">
                  <input type="text" name="query[source]" style="width:500px;" />
                </td>
              </tr>
              <tr>
                <td class="column1">
                  <label for="query[query]">Query</label>
                </td>
                <td colspan="2">         
                  <textarea name="query[query]" style="height:300px; width:500px;"></textarea>
                </td>
              </tr>
              <tr>
                <td class="column1">
                  <label for="data-formatter">Formatter</label>
                </td>
                <td colspan="2">
                  <input name="data_formatter" type="radio" value="table" /> - Table
                  <input name="data_formatter" type="radio" value="xslt" /> - XSLT
                  <input name="data_formatter" type="radio" value="google" /> - Google visualization
                </td>
              </tr>
              <tr>
                <td class="column1">
                  Tutorial mode:
                </td>
                <td colspan="2">
                  <input name="tutorial_mode" type="checkbox" />
                </td>
              </tr>
            </table>
          </fieldset>
        </div>
        <div id="google_panel" class="panel">
          <div class="errors" style="color:red;"></div>
          <fieldset>
            <legend>Google Visualisation settings</legend>
            <table>
              <tr>
                <td class="column1">
                  Google Visualisation
                </td>
                <td colspan="2">
                  <select name="google-viz" id="google_viz">
                    <option value="Table" selected="selected">Table</option>
                    <option value="Map">Map</option>
                    <option value="AreaChart">Area Chart</option>
                    <option value="BarChart">Bar Chart</option>
                    <option value="ColumnChart">Column Chart</option>
                    <option value="GeoMap">GeoMap</option>
                    <option value="Gauge">Gauge</option>
                  </select>
                </td>
              </tr>
            </table>
          </fieldset>
          <fieldset>
            <legend>Visualisation options</legend>
            <table id="google-opts">
              <tr>
                <td class="column1">
                  Width
                </td>
                <td colspan="2">
                  <input type="text" name="width" data-type="number" value="300"/>
                </td>
              </tr>
              <tr>
                <td class="column1">
                  Height 
                </td>
                <td colspan="2">
                  <input type="text" name="height" data-type="number" value="300"/>
                </td>
              </tr>
              <tr>
                <td class="column1">
                  Title 
                </td>
                <td colspan="2">
                  <input type="text" name="title" data-type="string" value="Title"/>
                </td>
              </tr>
            </table>
          </fieldset>
        </div>
        <div id="xslt_panel" class="panel">
          <div class="errors" style="color:red;"></div>
          <fieldset>
            <legend>XSLT settings</legend>
            <table>
              <tr>
                <td colspan="3">
                  Fill in either an XSLT URL or supply a custom XSLT stylesheet for the server
                </td>
              </tr>
              <tr>
                 <td class="column1">
                   XSLT sheet URL
                 </td>
                 <td colspan="2">
                   <input name="query[xslt_path]" type="text" style="width:500px;" />
                 </td>
              </tr>
              <tr>
                <td class="column1">
                  XSLT Stylesheet
                </td>
                <td colspan="2">
                  <textarea name="query[xslt_sheet]" style="height:300px;width:500px;"></textarea>
                </td>
              </tr>
              <tr>
                <td class="column1">
                  XSLT output type
                </td>
                <td colspan="2">
                  <select name="query[xslt_type]" id="xslt_type">
                    <option selected="selected" value="html">HTML</option>
                    <option value="json">JSON</option>
                    <option value="text">Text</option>
                  </select>
                </td>
              </tr>
            </table>
          </fieldset>
        </div>
        <div id="preview_panel" class="panel">
          <div class="errors" style="color:red;"></div>
          <fieldset>
            <legend>Preview</legend>
            <div id="preview_results" style="height:400px; width:500px; overflow:auto; border: 1px solid black;">
            </div>
          </fieldset>
        </div>
      </div>
      <div class="mceActionPanel">    
        <div style="float:left;">
          <input type="submit" name="insert" value="Insert" id="insert" />
<!--          <input type="submit" name="preview" value="Preview" class="button" id="preview_button" /> -->
        </div>
      </div>
    </form>
    <script src="js/config_dialog.js"></script>
    <script src="js/mysparql_dialog.js"></script>
    <script src="js/MySparql.js"></script>
  </body>
</html>
